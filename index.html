<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #0b0e12;
            --card: #171a21;
            --accent: #0088cc;
            --gold: #ffca28;
            --green: #4caf50;
            --red: #ff4b4b;
            --text: #ffffff;
            --text-gray: #8e97a4;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: -apple-system, sans-serif;
            margin: 0; padding: 0;
            overflow: hidden; /* –§–∏–∫—Å–∏—Ä—É–µ–º —ç–∫—Ä–∞–Ω, —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ—Ä–≥–∞–ª–æ—Å—å */
            user-select: none;
            height: 100vh;
        }

        /* 1. Splash Screen */
        #splash {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: var(--bg);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 1000; transition: 0.5s;
        }
        .logo { width: 100px; height: 100px; margin-bottom: 15px; border-radius: 20px; }

        /* 2. Header & Online */
        .header { padding: 15px; display: flex; justify-content: space-between; align-items: center; }
        .online-box { display: flex; align-items: center; gap: 6px; font-size: 13px; color: var(--text-gray); }
        .online-dot { width: 6px; height: 6px; background: var(--green); border-radius: 50%; box-shadow: 0 0 8px var(--green); animation: blink 1.5s infinite; }
        
        .balance-card {
            background: var(--card); padding: 8px 15px; border-radius: 25px;
            display: flex; align-items: center; gap: 8px; border: 1px solid #2c3440;
        }

        /* 3. Live Drops */
        .live-drops {
            height: 50px; background: rgba(0,0,0,0.3); 
            display: flex; align-items: center; gap: 10px; padding: 0 10px;
            overflow: hidden; position: relative; border-bottom: 1px solid #1c212a;
        }
        .drop-item {
            min-width: 35px; height: 35px; background: var(--card);
            border-radius: 6px; display: flex; align-items: center; justify-content: center;
            border-bottom: 2px solid var(--accent);
            animation: slideIn 0.5s ease-out; font-size: 20px;
        }

        /* 4. Cards & Menu */
        .section-label { padding: 20px 15px 10px; font-size: 12px; color: var(--text-gray); text-transform: uppercase; letter-spacing: 1px; }
        .big-card {
            margin: 0 15px 12px; background: var(--card); padding: 18px;
            border-radius: 16px; display: flex; justify-content: space-between; align-items: center;
            border: 1px solid #242933; transition: 0.2s;
        }
        .big-card:active { transform: scale(0.98); background: #1f232d; }
        .free-case-btn { background: linear-gradient(135deg, #1e3c72, #2a5298); border: none; }

        /* 5. Modals (Deposit & Screens) */
        .modal-screen {
            position: fixed; bottom: -100%; left: 0; width: 100%; height: 100%;
            background: var(--bg); z-index: 900; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 20px; box-sizing: border-box; display: flex; flex-direction: column;
        }
        .modal-screen.active { bottom: 0; }

        /* 6. Improved Input field */
        .input-container {
            margin: 20px 0;
            background: #1c212a;
            border: 2px solid #2c3440;
            border-radius: 15px;
            padding: 10px;
        }
        .input-stars {
            width: 100%; background: transparent; border: none;
            color: var(--gold); font-size: 32px; text-align: center; outline: none;
            padding: 10px 0; font-weight: bold;
        }

        .pay-btn {
            width: 100%; padding: 18px; border-radius: 15px; border: none;
            font-size: 18px; font-weight: bold; color: white; background: #2c3440; transition: 0.3s;
        }
        .pay-btn.enabled { background: var(--accent); }

        .btn-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 20px; }
        .grid-btn { background: #242a35; border: 1px solid #2c3440; color: white; padding: 12px; border-radius: 10px; font-weight: 600; }

        @keyframes blink { 0%, 100% { opacity: 0.4; } 50% { opacity: 1; } }
        @keyframes slideIn { from { transform: translateX(50px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    </style>
</head>
<body>

    <div id="splash">
        <img src="logo.png" class="logo" onerror="this.src='https://cdn-icons-png.flaticon.com/512/5968/5968804.png'">
        <div style="font-weight: bold; letter-spacing: 2px;">GIFT MARKET</div>
    </div>

    <div class="header">
        <div class="online-box">
            <div class="online-dot"></div>
            –û–Ω–ª–∞–π–Ω: <span id="online-count">1482</span>
        </div>
        <div class="balance-card" onclick="openDeposit()">
            <span>‚≠ê <span id="balance">0</span></span>
            <div style="margin-left:5px; color:var(--accent); font-weight:bold; font-size:18px;">+</div>
        </div>
    </div>

    <div class="live-drops" id="live-drops"></div>

    <div class="section-label">–≠–∫—Å–∫–ª—é–∑–∏–≤</div>
    <div class="big-card free-case-btn" onclick="openFreeCase()">
        <div>
            <div style="font-weight:bold; font-size:17px;">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–µ–π—Å</div>
            <div style="font-size:12px; opacity:0.8;">–ó–∞ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —Å–ø–æ–Ω—Å–æ—Ä–æ–≤</div>
        </div>
        <div style="font-size:30px;">üéÅ</div>
    </div>

    <div class="section-label">–ò–≥—Ä—ã</div>
    <div class="big-card" onclick="alert('–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
        <span>üì¶ –ö–µ–π—Å—ã</span>
        <span>‚Üí</span>
    </div>
    <div class="big-card" style="border-left: 4px solid var(--red);" onclick="alert('–†–∞–∫–µ—Ç–∫–∞ —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è!')">
        <span>üöÄ –†–∞–∫–µ—Ç–∫–∞</span>
        <span style="color:var(--red); font-size:12px; font-weight:bold;">COMING SOON</span>
    </div>

    <div id="deposit-screen" class="modal-screen">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h3 style="margin:0;">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ Stars</h3>
            <div onclick="closeModal('deposit-screen')" style="font-size:24px; padding:10px;">‚úï</div>
        </div>
        
        <div class="input-container">
            <input type="number" id="star-input" class="input-stars" placeholder="0" oninput="validateInput()">
        </div>
        
        <div class="btn-grid">
            <button class="grid-btn" onclick="setStars(50)">MIN (50)</button>
            <button class="grid-btn" onclick="setStars(200)">200</button>
            <button class="grid-btn" onclick="setStars(500)">500</button>
            <button class="grid-btn" onclick="setStars(1000)">1000</button>
        </div>

        <button id="pay-button" class="pay-btn" onclick="sendPayment()" disabled>–û–ü–õ–ê–¢–ò–¢–¨</button>
    </div>

    <div id="free-case-screen" class="modal-screen">
        <div style="display:flex; justify-content:space-between; align-items: center;">
            <button onclick="closeModal('free-case-screen')" style="background:none; border:none; color:white; font-size:26px;">‚Üê</button>
            <h3 style="margin:0;">GIFT CASE</h3>
            <div></div>
        </div>

        <div style="text-align:center; padding: 40px 0;">
            <div style="font-size:80px; margin-bottom:10px;">üéÅ</div>
            <p style="color:var(--text-gray); font-size:14px; padding: 0 20px;">–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª—ã –Ω–∞—à–∏—Ö —Å–ø–æ–Ω—Å–æ—Ä–æ–≤, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–µ–π—Å—É</p>
        </div>

        <div class="section-label">–°–ø–æ–Ω—Å–æ—Ä—ã</div>
        <div class="big-card" onclick="window.open('https://t.me/—Ç–≤–æ–π_–∫–∞–Ω–∞–ª_1')">
            <span>üì¢ –ö–∞–Ω–∞–ª –°–ø–æ–Ω—Å–æ—Ä–∞ #1</span>
            <span style="color:var(--accent); font-weight:bold;">GO</span>
        </div>
        <div class="big-card" onclick="window.open('https://t.me/—Ç–≤–æ–π_–∫–∞–Ω–∞–ª_2')">
            <span>üì¢ –ö–∞–Ω–∞–ª –°–ø–æ–Ω—Å–æ—Ä–∞ #2</span>
            <span style="color:var(--accent); font-weight:bold;">GO</span>
        </div>

        <div style="margin-top:auto; padding-bottom:20px;">
            <button class="pay-btn enabled" onclick="confirmSub()">–ü–†–û–í–ï–†–ò–¢–¨ –ü–û–î–ü–ò–°–ö–£</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // Splash screen delay
        setTimeout(() => {
            const sp = document.getElementById('splash');
            sp.style.opacity = '0';
            setTimeout(() => sp.style.display = 'none', 500);
        }, 2000);

        // Real-time Online
        setInterval(() => {
            let count = parseInt(document.getElementById('online-count').innerText);
            let change = Math.floor(Math.random() * 5) - 2;
            document.getElementById('online-count').innerText = (count + change);
        }, 3000);

        // Live Drop Feed
        const icons = ['üåπ','üçì','üíç','üê∏','üèÜ','üö¨','üß§','üíé'];
        function addDrop() {
            const container = document.getElementById('live-drops');
            const item = document.createElement('div');
            item.className = 'drop-item';
            item.innerHTML = icons[Math.floor(Math.random()*icons.length)];
            container.prepend(item);
            if(container.children.length > 12) container.lastChild.remove();
        }
        setInterval(addDrop, 3500);
        for(let i=0; i<8; i++) addDrop();

        // Navigation
        function openDeposit() { document.getElementById('deposit-screen').classList.add('active'); }
        function openFreeCase() { document.getElementById('free-case-screen').classList.add('active'); }
        function closeModal(id) { document.getElementById(id).classList.remove('active'); }

        // Logic for Input
        function setStars(v) {
            document.getElementById('star-input').value = v;
            validateInput();
        }

        function validateInput() {
            const val = parseInt(document.getElementById('star-input').value);
            const btn = document.getElementById('pay-button');
            if(val >= 50) {
                btn.classList.add('enabled');
                btn.disabled = false;
            } else {
                btn.classList.remove('enabled');
                btn.disabled = true;
            }
        }

        function sendPayment() {
            const val = document.getElementById('star-input').value;
            tg.sendData("pay:" + val);
        }

        function confirmSub() {
            tg.sendData("action:check_sub");
        }
    </script>
</body>
</html>
